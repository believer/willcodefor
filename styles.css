@tailwind base;
@tailwind components;
@tailwind utilities;

.hljs {
  @apply !bg-transparent;
}

::selection {
  @apply bg-emerald-300 dark:bg-emerald-700;
}

dialog::backdrop {
  @apply fixed inset-0 bg-neutral-400/80 dark:bg-neutral-800/80;
}

@layer base {
  details summary::-webkit-details-marker {
    display: none;
  }

  h1 {
    @apply mb-5 flex text-2xl font-semibold;
  }

  h2 {
    @apply mb-5 text-lg font-semibold;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  blockquote {
    @apply text-balance;
  }

  a {
    @apply no-underline border-b text-neutral-700 dark:text-neutral-300 border-sky-700 dark:border-sky-500 hover:text-sky-700 dark:hover:text-sky-500 transition-colors focus:outline-offset-2 dark:focus:outline-neutral-600 focus:outline-dashed focus:text-sky-700 dark:focus:text-sky-500;
  }

  hr {
    @apply my-4 border-neutral-300 dark:border-neutral-700;
  }

  abbr[title] {
    @apply cursor-help border-b-2 border-dashed border-neutral-400 dark:border-neutral-500 no-underline;
  }

  /* Display the abbr title on mobile devices when clicked */
  abbr[title]:focus::after,
  abbr[title]:hover::after {
    content: " (" attr(title) ")";
  }

  /* Remove abbr display on hover devices */
  @media (any-hover: hover) {
    abbr[title]:hover::after {
      content: "";
    }
  }
}

@layer components {
  .grid-post {
    grid-template-columns: 1fr max-content;
  }

  .grid-template-main {
    grid-template-columns: 2rem 1fr minmax(auto, 900px) 1fr 2rem;
  }

  .grid-search {
    grid-template-columns: 1fr auto;
  }

  .til-counter::before {
    @apply absolute -left-14 top-1/2 hidden w-12 -translate-y-1/2 text-right text-xs tabular-nums text-neutral-500 dark:text-neutral-400;

    content: "#" attr(data-til) ": ";
  }

  /* SM */
  @media (min-width: 640px) {
    .grid-post {
      grid-template-columns: max-content 1fr max-content;
    }

    .til-counter::before {
      @apply block;
    }
  }

  .hljs {
    @apply !bg-transparent;
  }

  .counter {
    counter-reset: section;
  }

  .counter-increment::before {
    @apply w-12 text-right font-mono text-xs tabular-nums text-neutral-600;

    counter-increment: section;
    content: "#" counter(section) ": ";
  }
}
